<!-- Modals -->
<div id="add-customer-modal" class="modal hidden fixed inset-0 z-50 flex items-center justify-center p-4">
    <div class="modal-backdrop fixed inset-0" onclick="hideModal('add-customer-modal')"></div>
    <div class="bg-white rounded-lg shadow-xl w-full max-w-lg z-10">
        <div class="p-6 border-b"><h3 class="text-xl font-semibold">Tambah Pelanggan Baru</h3></div>
        <div class="p-6 space-y-4">
            <div><label class="block text-sm font-medium text-slate-700">Nama Perusahaan</label><input type="text" class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"></div>
            <div><label class="block text-sm font-medium text-slate-700">Industri</label><select class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"><option value="Manufaktur">Manufaktur</option><option value="Retail">Retail</option><option value="Keuangan">Keuangan</option><option value="Pariwisata">Pariwisata</option><option value="F&B">F&B</option><option value="Kesehatan">Kesehatan</option><option value="Pendidikan">Pendidikan</option><option value="Properti">Properti</option><option value="Pemerintah">Pemerintah</option><option value="Logistik">Logistik</option><option value="Agribisnis">Agribisnis</option></select></div>
        </div>
        <div class="p-4 bg-slate-50 flex justify-end space-x-2">
            <button onclick="hideModal('add-customer-modal')" class="px-4 py-2 bg-slate-200 text-slate-800 rounded-lg hover:bg-slate-300">Batal</button>
            <button class="px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700">Simpan</button>
        </div>
    </div>
</div>

<div id="add-sales-plan-modal" class="modal hidden fixed inset-0 z-50 flex items-center justify-center p-4">
    <div class="modal-backdrop fixed inset-0" onclick="hideModal('add-sales-plan-modal')"></div>
    <div class="bg-white rounded-lg shadow-xl w-full max-w-lg z-10">
        <div class="p-6 border-b"><h3 class="text-xl font-semibold">Buat Sales Plan Baru</h3></div>
        <div class="p-6 space-y-4">
            <div><label class="block text-sm font-medium text-slate-700">Nama Plan</label><input type="text" placeholder="Contoh: Penawaran Solusi Cloud Backup" class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"></div>
            <div><label class="block text-sm font-medium text-slate-700">Produk/Layanan Ditawarkan</label><input type="text" class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"></div>
            <div><label class="block text-sm font-medium text-slate-700">Target</label><input type="text" placeholder="Contoh: Closing kontrak Rp 50.000.000" class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"></div>
            <div><label class="block text-sm font-medium text-slate-700">Tanggal</label><input type="date" class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"></div>
        </div>
        <div class="p-4 bg-slate-50 flex justify-end space-x-2">
            <button onclick="hideModal('add-sales-plan-modal')" class="px-4 py-2 bg-slate-200 text-slate-800 rounded-lg hover:bg-slate-300">Batal</button>
            <button class="px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700">Simpan</button>
        </div>
    </div>
</div>

<div id="add-visit-modal" class="modal hidden fixed inset-0 z-50 flex items-center justify-center p-4">
    <div class="modal-backdrop fixed inset-0" onclick="hideModal('add-visit-modal')"></div>
    <div class="bg-white rounded-lg shadow-xl w-full max-w-lg z-10">
        <div class="p-6 border-b"><h3 class="text-xl font-semibold">Rencanakan Visit Baru</h3></div>
        <div class="p-6 space-y-4">
            <div><label class="block text-sm font-medium text-slate-700">Tanggal & Waktu</label><input type="datetime-local" class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"></div>
            <div><label class="block text-sm font-medium text-slate-700">Tujuan Visit</label><input type="text" placeholder="Contoh: Presentasi Solusi Cloud Backup" class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"></div>
            <div><label class="block text-sm font-medium text-slate-700">Lokasi / Metode</label><select class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"><option>Kantor Pelanggan</option><option>Online Meeting</option><option>Lainnya</option></select></div>
        </div>
        <div class="p-4 bg-slate-50 flex justify-end space-x-2">
            <button onclick="hideModal('add-visit-modal')" class="px-4 py-2 bg-slate-200 text-slate-800 rounded-lg hover:bg-slate-300">Batal</button>
            <button class="px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700">Simpan & Notifikasi Pelanggan</button>
        </div>
    </div>
</div>

<div id="add-visit-report-modal" class="modal hidden fixed inset-0 z-50 flex items-center justify-center p-4">
    <div class="modal-backdrop fixed inset-0" onclick="hideModal('add-visit-report-modal')"></div>
    <div class="bg-white rounded-lg shadow-xl w-full max-w-lg z-10">
        <div class="p-6 border-b"><h3 class="text-xl font-semibold">Tambah Laporan Visit</h3></div>
        <div class="p-6 space-y-4">
            <div><label class="block text-sm font-medium text-slate-700">Tanggal & Waktu</label><input type="datetime-local" class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"></div>
            <div><label class="block text-sm font-medium text-slate-700">Tujuan Visit</label><input type="text" placeholder="Contoh: Follow Up Penawaran" class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"></div>
            <div><label class="block text-sm font-medium text-slate-700">Lokasi / Metode</label><select class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"><option>Kantor Pelanggan</option><option>Online Meeting</option><option>Lainnya</option></select></div>
            <div><label class="block text-sm font-medium text-slate-700">Status Visit</label><select class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"><option>Sukses</option><option>Follow Up</option><option>Tidak Berhasil</option></select></div>
            <div><label class="block text-sm font-medium text-slate-700">Laporan Visit</label><textarea rows="4" placeholder="Deskripsikan hasil visit dan next action..." class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"></textarea></div>
        </div>
        <div class="p-4 bg-slate-50 flex justify-end space-x-2">
            <button onclick="hideModal('add-visit-report-modal')" class="px-4 py-2 bg-slate-200 text-slate-800 rounded-lg hover:bg-slate-300">Batal</button>
            <button class="px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700">Simpan Laporan</button>
        </div>
    </div>
</div>

<!-- Improved Pain Points Modal -->
<div id="pain-points-modal" class="modal hidden fixed inset-0 z-50 flex items-center justify-center p-4">
    <div class="modal-backdrop fixed inset-0" onclick="hideModal('pain-points-modal')"></div>
    <div class="bg-white rounded-lg shadow-xl w-full max-w-2xl z-10 flex flex-col max-h-[90vh]">
        <div class="p-6 border-b sticky top-0 bg-white">
            <h3 class="text-xl font-semibold">Input Pain Points Pelanggan</h3>
            <p class="text-sm text-slate-500">Identifikasi masalah pelanggan berdasarkan kerangka Value Chain.</p>
        </div>
        <div class="p-6 space-y-6 overflow-y-auto">
            <div>
                <h4 class="text-lg font-semibold text-slate-700 mb-3">Primary Activities</h4>
                <div class="space-y-4 pl-4 border-l-2 border-red-500">
                    <div><label class="block text-sm font-medium text-slate-700">Inbound Logistics</label><textarea rows="2" placeholder="Contoh: Proses penerimaan bahan baku lambat..." class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"></textarea></div>
                    <div><label class="block text-sm font-medium text-slate-700">Operations</label><textarea rows="2" placeholder="Contoh: Mesin produksi sering downtime..." class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500">Mesin produksi sering downtime karena tidak ada maintenance prediktif.</textarea></div>
                    <div><label class="block text-sm font-medium text-slate-700">Outbound Logistics</label><textarea rows="2" placeholder="Contoh: Pengiriman barang ke distributor sering terlambat..." class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"></textarea></div>
                    <div><label class="block text-sm font-medium text-slate-700">Marketing & Sales</label><textarea rows="2" placeholder="Contoh: Sulit menjangkau pelanggan baru secara online..." class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"></textarea></div>
                    <div><label class="block text-sm font-medium text-slate-700">Service</label><textarea rows="2" placeholder="Contoh: Tim support kewalahan menangani keluhan pelanggan..." class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"></textarea></div>
                </div>
            </div>
            <div>
                <h4 class="text-lg font-semibold text-slate-700 mb-3">Support Activities</h4>
                <div class="space-y-4 pl-4 border-l-2 border-green-500">
                    <div><label class="block text-sm font-medium text-slate-700">Firm Infrastructure</label><textarea rows="2" placeholder="Contoh: Sistem pelaporan keuangan masih manual..." class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"></textarea></div>
                    <div><label class="block text-sm font-medium text-slate-700">Human Resource Management</label><textarea rows="2" placeholder="Contoh: Proses rekrutmen dan onboarding karyawan lama..." class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"></textarea></div>
                    <div><label class="block text-sm font-medium text-slate-700">Technology Development</label><textarea rows="2" placeholder="Contoh: Sistem IT internal sudah usang dan tidak terintegrasi..." class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500">Sistem IT internal sudah usang dan tidak terintegrasi, menyebabkan silo data antar departemen.</textarea></div>
                    <div><label class="block text-sm font-medium text-slate-700">Procurement</label><textarea rows="2" placeholder="Contoh: Proses pengadaan barang tidak efisien, harga sering kemahalan..." class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"></textarea></div>
                </div>
            </div>
        </div>
        <div class="p-4 bg-slate-50 flex justify-end space-x-2 sticky bottom-0 border-t">
            <button onclick="hideModal('pain-points-modal')" class="px-4 py-2 bg-slate-200 text-slate-800 rounded-lg hover:bg-slate-300">Batal</button>
            <button onclick="savePainPoints()" class="px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700">Simpan Data</button>
        </div>
    </div>
</div>

<!-- Visit Completion Modal -->
<div id="visit-completion-modal" class="modal hidden fixed inset-0 z-50 flex items-center justify-center p-4">
    <div class="modal-backdrop fixed inset-0" onclick="hideModal('visit-completion-modal')"></div>
    <div class="bg-white rounded-lg shadow-xl w-full max-w-lg z-10">
        <div class="p-6 border-b"><h3 class="text-xl font-semibold">Input Hasil Visit</h3></div>
        <div class="p-6 space-y-4">
            <div><label class="block text-sm font-medium text-slate-700">Status Visit</label><select id="visit-completion-status" class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"><option>Sukses</option><option>Follow Up</option><option>Tidak Berhasil</option></select></div>
            <div><label class="block text-sm font-medium text-slate-700">Laporan Visit</label><textarea id="visit-completion-report" rows="4" placeholder="Deskripsikan hasil visit dan next action..." class="mt-1 block w-full border-slate-300 rounded-md shadow-sm focus:ring-sky-500 focus:border-sky-500"></textarea></div>
        </div>
        <div class="p-4 bg-slate-50 flex justify-end space-x-2">
            <button onclick="hideModal('visit-completion-modal')" class="px-4 py-2 bg-slate-200 text-slate-800 rounded-lg hover:bg-slate-300">Batal</button>
            <button onclick="saveVisitCompletion()" class="px-4 py-2 bg-sky-600 text-white rounded-lg hover:bg-sky-700">Simpan Hasil Visit</button>
        </div>
    </div>
</div>
