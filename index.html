<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CRM Professional - Telkom Sales Management</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: {
                            50: '#eff6ff',
                            100: '#dbeafe',
                            200: '#bfdbfe',
                            300: '#93c5fd',
                            400: '#60a5fa',
                            500: '#3b82f6',
                            600: '#2563eb',
                            700: '#1d4ed8',
                            800: '#1e40af',
                            900: '#1e3a8a',
                        },
                        gray: {
                            50: '#f8fafc',
                            100: '#f1f5f9',
                            200: '#e2e8f0',
                            300: '#cbd5e1',
                            400: '#94a3b8',
                            500: '#64748b',
                            600: '#475569',
                            700: '#334155',
                            800: '#1e293b',
                            900: '#0f172a',
                        }
                    },
                    fontFamily: {
                        sans: ['Inter', 'system-ui', 'sans-serif'],
                    },
                    boxShadow: {
                        'soft': '0 2px 15px -3px rgba(0, 0, 0, 0.07), 0 10px 20px -2px rgba(0, 0, 0, 0.04)',
                        'medium': '0 4px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)',
                        'large': '0 10px 40px -10px rgba(0, 0, 0, 0.15), 0 20px 25px -5px rgba(0, 0, 0, 0.1)',
                    }
                }
            }
        }
    </script>
    <style>
        body {
            font-family: 'Inter', system-ui, sans-serif;
            font-feature-settings: 'cv02', 'cv03', 'cv04', 'cv11';
        }
        
        /* Custom Scrollbar */
        ::-webkit-scrollbar {
            width: 6px;
            height: 6px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f5f9;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb {
            background: linear-gradient(180deg, #cbd5e1, #94a3b8);
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(180deg, #94a3b8, #64748b);
        }

        /* Animations */
        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        
        @keyframes shimmer {
            0% { background-position: -200px 0; }
            100% { background-position: calc(200px + 100%) 0; }
        }

        .animate-slide-in {
            animation: slideIn 0.3s ease-out;
        }
        
        .animate-fade-in {
            animation: fadeIn 0.2s ease-out;
        }
        
        .animate-pulse-soft {
            animation: pulse 2s cubic-bezier(0.4, 0, 0.6, 1) infinite;
        }

        /* Loading Skeleton */
        .skeleton {
            background: linear-gradient(90deg, #f1f5f9 25%, #e2e8f0 50%, #f1f5f9 75%);
            background-size: 200px 100%;
            animation: shimmer 1.5s infinite;
        }

        /* Modal Backdrop */
        .modal-backdrop {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(8px);
        }

        /* Card Hover Effects */
        .card-hover {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }
        
        .card-hover:hover {
            transform: translateY(-4px);
            box-shadow: 0 20px 40px -12px rgba(0, 0, 0, 0.15);
        }

        /* Button Styles */
        .btn-primary {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            transition: all 0.2s ease;
        }
        
        .btn-primary:hover {
            background: linear-gradient(135deg, #2563eb, #1d4ed8);
            transform: translateY(-1px);
            box-shadow: 0 8px 25px -8px rgba(59, 130, 246, 0.5);
        }
        
        .btn-secondary {
            background: linear-gradient(135deg, #f8fafc, #f1f5f9);
            border: 1px solid #e2e8f0;
            transition: all 0.2s ease;
        }
        
        .btn-secondary:hover {
            background: linear-gradient(135deg, #f1f5f9, #e2e8f0);
            border-color: #cbd5e1;
            transform: translateY(-1px);
        }

        /* Timeline Styles */
        .timeline-item {
            position: relative;
            padding-left: 2rem;
            margin-bottom: 1.5rem;
        }
        
        .timeline-item::before {
            content: '';
            position: absolute;
            left: 0.5rem;
            top: 0;
            bottom: -1.5rem;
            width: 2px;
            background: linear-gradient(180deg, #3b82f6, #e2e8f0);
        }
        
        .timeline-item:last-child::before {
            bottom: 0;
        }
        
        .timeline-dot {
            position: absolute;
            left: 0;
            top: 0.5rem;
            width: 1rem;
            height: 1rem;
            border-radius: 50%;
            border: 3px solid white;
            box-shadow: 0 0 0 1px #e2e8f0;
        }
        
        .timeline-dot.completed {
            background: #22c55e;
            box-shadow: 0 0 0 1px #22c55e, 0 0 0 4px rgba(34, 197, 94, 0.1);
        }
        
        .timeline-dot.active {
            background: #3b82f6;
            box-shadow: 0 0 0 1px #3b82f6, 0 0 0 4px rgba(59, 130, 246, 0.1);
        }
        
        .timeline-dot.pending {
            background: #f59e0b;
            box-shadow: 0 0 0 1px #f59e0b, 0 0 0 4px rgba(245, 158, 11, 0.1);
        }

        /* Status Badges */
        .status-badge {
            display: inline-flex;
            align-items: center;
            padding: 0.375rem 0.75rem;
            border-radius: 9999px;
            font-size: 0.75rem;
            font-weight: 600;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        /* Form Styles */
        .form-input {
            transition: all 0.2s ease;
            border: 1.5px solid #e2e8f0;
        }
        
        .form-input:focus {
            border-color: #3b82f6;
            box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.1);
            outline: none;
        }
        .form-checkbox {
            color: #3b82f6;
        }
        .form-checkbox:focus {
             box-shadow: 0 0 0 3px rgba(59, 130, 246, 0.2);
             outline: none;
             border-color: #3b82f6;
        }

        /* Progress Bar */
        .progress-bar {
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            border-radius: 9999px;
            height: 0.5rem;
            transition: width 0.3s ease;
        }

        /* Sidebar Navigation */
        .nav-item {
            transition: all 0.2s ease;
            border-radius: 0.75rem;
            margin-bottom: 0.25rem;
        }
        
        .nav-item:hover {
            background: rgba(59, 130, 246, 0.05);
            transform: translateX(4px);
        }
        
        .nav-item.active {
            background: linear-gradient(135deg, #dbeafe, #bfdbfe);
            color: #1d4ed8;
            font-weight: 600;
        }

        /* Empty State */
        .empty-state {
            text-align: center;
            padding: 3rem 1rem;
        }
        
        .empty-state svg {
            margin: 0 auto 1rem;
            opacity: 0.4;
        }

        /* Floating Action Button */
        .fab {
            position: fixed;
            bottom: 2rem;
            right: 2rem;
            width: 3.5rem;
            height: 3.5rem;
            border-radius: 50%;
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
            display: flex;
            align-items: center;
            justify-content: center;
            box-shadow: 0 8px 32px -8px rgba(59, 130, 246, 0.4);
            transition: all 0.3s ease;
            z-index: 50;
        }
        
        .fab:hover {
            transform: scale(1.1);
            box-shadow: 0 12px 40px -8px rgba(59, 130, 246, 0.6);
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            .sidebar {
                transform: translateX(-100%);
                transition: transform 0.3s ease;
            }
            
            .sidebar.open {
                transform: translateX(0);
            }
        }

        /* Dark mode support */
        @media (prefers-color-scheme: dark) {
            :root {
                color-scheme: dark;
            }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-900 antialiased">
    <!-- Loading Screen -->
    <div id="loading-screen" class="fixed inset-0 bg-white z-50 flex items-center justify-center">
        <div class="text-center">
            <div class="w-16 h-16 border-4 border-primary-200 border-t-primary-600 rounded-full animate-spin mb-4"></div>
            <p class="text-gray-600 font-medium">Memuat CRM...</p>
        </div>
    </div>

    <!-- Mobile Menu Overlay -->
    <div id="mobile-overlay" class="fixed inset-0 bg-black bg-opacity-50 z-40 hidden md:hidden"></div>

    <div id="app-container" class="hidden">
        <div class="flex h-screen bg-gray-50">
            <!-- Sidebar -->
            <aside id="sidebar" class="sidebar fixed md:relative w-72 h-full bg-white border-r border-gray-200 z-30 flex flex-col">
                <!-- Logo -->
                <div class="flex items-center justify-between p-6 border-b border-gray-100">
                    <div class="flex items-center space-x-3">
                        <div class="w-10 h-10 bg-gradient-to-br from-red-500 to-red-600 rounded-xl flex items-center justify-center">
                            <svg class="w-6 h-6 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                            </svg>
                        </div>
                        <div>
                            <h1 class="text-lg font-bold text-gray-900">CRM Lite</h1>
                            <p class="text-xs text-gray-500">Sales Management</p>
                        </div>
                    </div>
                    <button id="close-sidebar" class="md:hidden p-2 rounded-lg hover:bg-gray-100">
                        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
                        </svg>
                    </button>
                </div>

                <!-- Navigation -->
                <nav class="flex-1 p-4 space-y-1">
                    <a href="#" onclick="showPage('dashboard-page')" class="nav-item active flex items-center space-x-3 p-3 text-sm">
                        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z" />
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 5a2 2 0 012-2h4a2 2 0 012 2v6H8V5z" />
                        </svg>
                        <span>Dashboard</span>
                    </a>
                    <a href="#" onclick="showPage('customers-page')" class="nav-item flex items-center space-x-3 p-3 text-sm">
                        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                        </svg>
                        <span>Pelanggan</span>
                    </a>
                    <a href="#" onclick="showPage('visits-page')" class="nav-item flex items-center space-x-3 p-3 text-sm">
                        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                        </svg>
                        <span>Jadwal Visit</span>
                    </a>
                    <a href="#" onclick="showPage('sales-plans-page')" class="nav-item flex items-center space-x-3 p-3 text-sm">
                        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                        </svg>
                        <span>Sales Plan</span>
                    </a>
                </nav>

                <!-- User Profile -->
                <div class="p-4 border-t border-gray-100">
                    <div class="flex items-center space-x-3 p-3 rounded-xl bg-gray-50">
                        <div class="w-10 h-10 bg-gradient-to-br from-primary-500 to-primary-600 rounded-full flex items-center justify-center text-white font-semibold text-sm">
                            BS
                        </div>
                        <div class="flex-1 min-w-0">
                            <p class="font-semibold text-sm text-gray-900 truncate">Budi Santoso</p>
                            <p class="text-xs text-gray-500 truncate">Account Manager</p>
                        </div>
                        <button class="p-1 rounded-lg hover:bg-gray-200 transition-colors">
                            <svg class="w-4 h-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 5v.01M12 12v.01M12 19v.01M12 6a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2zm0 7a1 1 0 110-2 1 1 0 010 2z" />
                            </svg>
                        </button>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="flex-1 flex flex-col min-w-0">
                <!-- Top Bar -->
                <header class="bg-white border-b border-gray-200 px-4 md:px-6 py-4">
                    <div class="flex items-center justify-between">
                        <div class="flex items-center space-x-4">
                            <button id="open-sidebar" class="md:hidden p-2 rounded-lg hover:bg-gray-100">
                                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" />
                                </svg>
                            </button>
                            <div>
                                <h1 id="page-title" class="text-xl md:text-2xl font-bold text-gray-900">Dashboard</h1>
                                <p id="page-subtitle" class="text-sm text-gray-500 mt-1">Selamat datang kembali, Budi!</p>
                            </div>
                        </div>
                        <div class="flex items-center space-x-3">
                            <button class="relative p-2 rounded-lg hover:bg-gray-100 transition-colors">
                                <svg class="w-5 h-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-5 5-5-5h5v-5a7.5 7.5 0 01-7.5-7.5H2.5a7.5 7.5 0 017.5 7.5v5z" />
                                </svg>
                                <span class="absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full"></span>
                            </button>
                            <button onclick="showModal('add-customer-modal')" class="btn-primary px-4 py-2 rounded-lg text-white font-semibold text-sm flex items-center space-x-2">
                                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                                </svg>
                                <span class="hidden sm:inline">Tambah Pelanggan</span>
                            </button>
                        </div>
                    </div>
                </header>

                <!-- Page Content -->
                <div class="flex-1 overflow-y-auto">
                    <!-- Dashboard Page -->
                    <div id="dashboard-page" class="page p-4 md:p-6">
                        <!-- Stats Cards -->
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                            <div class="bg-white rounded-2xl p-6 shadow-soft border border-gray-100">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Total Pelanggan</p>
                                        <p class="text-3xl font-bold text-gray-900 mt-2">42</p>
                                        <p class="text-sm text-emerald-600 mt-1">+12% dari bulan lalu</p>
                                    </div>
                                    <div class="w-12 h-12 bg-blue-100 rounded-xl flex items-center justify-center">
                                        <svg class="w-6 h-6 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                                        </svg>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-2xl p-6 shadow-soft border border-gray-100 card-hover cursor-pointer" onclick="showPage('visits-page')">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Visit Minggu Ini</p>
                                        <p class="text-3xl font-bold text-gray-900 mt-2">8</p>
                                        <p class="text-sm text-amber-600 mt-1">3 terjadwal hari ini</p>
                                    </div>
                                    <div class="w-12 h-12 bg-amber-100 rounded-xl flex items-center justify-center">
                                        <svg class="w-6 h-6 text-amber-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                        </svg>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-2xl p-6 shadow-soft border border-gray-100 card-hover cursor-pointer" onclick="showPage('sales-plans-page')">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Sales Plan Aktif</p>
                                        <p class="text-3xl font-bold text-gray-900 mt-2">12</p>
                                        <p class="text-sm text-emerald-600 mt-1">85% success rate</p>
                                    </div>
                                    <div class="w-12 h-12 bg-emerald-100 rounded-xl flex items-center justify-center">
                                        <svg class="w-6 h-6 text-emerald-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                                        </svg>
                                    </div>
                                </div>
                            </div>

                            <div class="bg-white rounded-2xl p-6 shadow-soft border border-gray-100">
                                <div class="flex items-center justify-between">
                                    <div>
                                        <p class="text-sm font-medium text-gray-600">Revenue Target</p>
                                        <p class="text-3xl font-bold text-gray-900 mt-2">78%</p>
                                        <p class="text-sm text-purple-600 mt-1">Rp 2.1M tercapai</p>
                                    </div>
                                    <div class="w-12 h-12 bg-purple-100 rounded-xl flex items-center justify-center">
                                        <svg class="w-6 h-6 text-purple-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1" />
                                        </svg>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <!-- Recent Activity & Quick Actions -->
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-6 mb-8">
                            <!-- Recent Activity -->
                            <div class="lg:col-span-2 bg-white rounded-2xl shadow-soft border border-gray-100">
                                <div class="p-6 border-b border-gray-100">
                                    <h3 class="text-lg font-semibold text-gray-900">Aktivitas Terbaru</h3>
                                </div>
                                <div class="p-6">
                                    <div class="space-y-4">
                                        <div class="flex items-start space-x-4">
                                            <div class="w-8 h-8 bg-emerald-100 rounded-full flex items-center justify-center flex-shrink-0">
                                                <svg class="w-4 h-4 text-emerald-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 13l4 4L19 7" />
                                                </svg>
                                            </div>
                                            <div class="flex-1 min-w-0">
                                                <p class="text-sm font-medium text-gray-900">Visit PT. Maju Mundur selesai</p>
                                                <p class="text-sm text-gray-500">Hasil positif, peluang closing 85%</p>
                                                <p class="text-xs text-gray-400 mt-1">2 jam yang lalu</p>
                                            </div>
                                        </div>
                                        <div class="flex items-start space-x-4">
                                            <div class="w-8 h-8 bg-blue-100 rounded-full flex items-center justify-center flex-shrink-0">
                                                <svg class="w-4 h-4 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                                                </svg>
                                            </div>
                                            <div class="flex-1 min-w-0">
                                                <p class="text-sm font-medium text-gray-900">Sales plan baru dibuat</p>
                                                <p class="text-sm text-gray-500">CV. Jaya Abadi - Target Rp 150M</p>
                                                <p class="text-xs text-gray-400 mt-1">5 jam yang lalu</p>
                                            </div>
                                        </div>
                                        <div class="flex items-start space-x-4">
                                            <div class="w-8 h-8 bg-amber-100 rounded-full flex items-center justify-center flex-shrink-0">
                                                <svg class="w-4 h-4 text-amber-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                                </svg>
                                            </div>
                                            <div class="flex-1 min-w-0">
                                                <p class="text-sm font-medium text-gray-900">Visit dijadwalkan</p>
                                                <p class="text-sm text-gray-500">Koperasi Sejahtera - Besok 09:00</p>
                                                <p class="text-xs text-gray-400 mt-1">1 hari yang lalu</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <!-- Quick Actions -->
                            <div class="bg-white rounded-2xl shadow-soft border border-gray-100">
                                <div class="p-6 border-b border-gray-100">
                                    <h3 class="text-lg font-semibold text-gray-900">Aksi Cepat</h3>
                                </div>
                                <div class="p-6 space-y-3">
                                    <button onclick="showModal('add-customer-modal')" class="w-full btn-secondary p-4 rounded-xl text-left flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center">
                                            <svg class="w-4 h-4 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                                            </svg>
                                        </div>
                                        <div>
                                            <p class="font-medium text-gray-900">Tambah Pelanggan</p>
                                            <p class="text-sm text-gray-500">Daftarkan pelanggan baru</p>
                                        </div>
                                    </button>
                                    <button onclick="showPage('visits-page')" class="w-full btn-secondary p-4 rounded-xl text-left flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-amber-100 rounded-lg flex items-center justify-center">
                                            <svg class="w-4 h-4 text-amber-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                                            </svg>
                                        </div>
                                        <div>
                                            <p class="font-medium text-gray-900">Jadwalkan Visit</p>
                                            <p class="text-sm text-gray-500">Atur jadwal kunjungan</p>
                                        </div>
                                    </button>
                                    <button class="w-full btn-secondary p-4 rounded-xl text-left flex items-center space-x-3">
                                        <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center">
                                            <svg class="w-4 h-4 text-emerald-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                                            </svg>
                                        </div>
                                        <div>
                                            <p class="font-medium text-gray-900">Buat Laporan</p>
                                            <p class="text-sm text-gray-500">Generate laporan bulanan</p>
                                        </div>
                                    </button>
                                </div>
                            </div>
                        </div>

                        <!-- Customer List -->
                        <div class="bg-white rounded-2xl shadow-soft border border-gray-100">
                            <div class="p-6 border-b border-gray-100">
                                <div class="flex flex-col md:flex-row md:items-center justify-between space-y-4 md:space-y-0">
                                    <h3 class="text-lg font-semibold text-gray-900">Daftar Pelanggan</h3>
                                    <div class="flex flex-col sm:flex-row space-y-2 sm:space-y-0 sm:space-x-3">
                                        <div class="relative">
                                            <svg class="absolute left-3 top-1/2 transform -translate-y-1/2 w-4 h-4 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z" />
                                            </svg>
                                            <input type="text" placeholder="Cari pelanggan..." class="form-input pl-10 pr-4 py-2 w-full sm:w-64 rounded-lg text-sm">
                                        </div>
                                        <select class="form-input px-3 py-2 rounded-lg text-sm">
                                            <option>Semua Industri</option>
                                            <option>Manufaktur</option>
                                            <option>Retail</option>
                                            <option>Keuangan</option>
                                        </select>
                                    </div>
                                </div>
                            </div>
                            <div class="overflow-x-auto">
                                <table class="w-full">
                                    <thead class="bg-gray-50 border-b border-gray-100">
                                        <tr>
                                            <th class="text-left py-4 px-6 font-semibold text-sm text-gray-700">Pelanggan</th>
                                            <th class="text-left py-4 px-6 font-semibold text-sm text-gray-700 hidden md:table-cell">Industri</th>
                                            <th class="text-left py-4 px-6 font-semibold text-sm text-gray-700">Status</th>
                                            <th class="text-left py-4 px-6 font-semibold text-sm text-gray-700 hidden lg:table-cell">Last Contact</th>
                                            <th class="text-right py-4 px-6 font-semibold text-sm text-gray-700">Aksi</th>
                                        </tr>
                                    </thead>
                                    <tbody class="divide-y divide-gray-100">
                                        <tr class="hover:bg-gray-50 transition-colors cursor-pointer" onclick="showCustomerProfile('PT. Maju Mundur', 'Manufaktur')">
                                            <td class="py-4 px-6">
                                                <div class="flex items-center space-x-3">
                                                    <div class="w-10 h-10 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white font-semibold text-sm">
                                                        MM
                                                    </div>
                                                    <div>
                                                        <p class="font-semibold text-gray-900">PT. Maju Mundur</p>
                                                        <p class="text-sm text-gray-500 md:hidden">Manufaktur</p>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="py-4 px-6 hidden md:table-cell">
                                                <span class="text-sm text-gray-600">Manufaktur</span>
                                            </td>
                                            <td class="py-4 px-6">
                                                <span class="status-badge bg-emerald-100 text-emerald-800">Aktif</span>
                                            </td>
                                            <td class="py-4 px-6 hidden lg:table-cell">
                                                <span class="text-sm text-gray-600">2 hari lalu</span>
                                            </td>
                                            <td class="py-4 px-6 text-right">
                                                <button class="text-primary-600 hover:text-primary-700 font-medium text-sm">Detail</button>
                                            </td>
                                        </tr>
                                        <tr class="hover:bg-gray-50 transition-colors cursor-pointer" onclick="showCustomerProfile('CV. Jaya Abadi', 'Retail')">
                                            <td class="py-4 px-6">
                                                <div class="flex items-center space-x-3">
                                                    <div class="w-10 h-10 bg-gradient-to-br from-emerald-500 to-emerald-600 rounded-full flex items-center justify-center text-white font-semibold text-sm">
                                                        JA
                                                    </div>
                                                    <div>
                                                        <p class="font-semibold text-gray-900">CV. Jaya Abadi</p>
                                                        <p class="text-sm text-gray-500 md:hidden">Retail</p>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="py-4 px-6 hidden md:table-cell">
                                                <span class="text-sm text-gray-600">Retail</span>
                                            </td>
                                            <td class="py-4 px-6">
                                                <span class="status-badge bg-amber-100 text-amber-800">Prospek</span>
                                            </td>
                                            <td class="py-4 px-6 hidden lg:table-cell">
                                                <span class="text-sm text-gray-600">1 minggu lalu</span>
                                            </td>
                                            <td class="py-4 px-6 text-right">
                                                <button class="text-primary-600 hover:text-primary-700 font-medium text-sm">Detail</button>
                                            </td>
                                        </tr>
                                        <tr class="hover:bg-gray-50 transition-colors cursor-pointer" onclick="showCustomerProfile('Koperasi Sejahtera', 'Keuangan')">
                                            <td class="py-4 px-6">
                                                <div class="flex items-center space-x-3">
                                                    <div class="w-10 h-10 bg-gradient-to-br from-purple-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold text-sm">
                                                        KS
                                                    </div>
                                                    <div>
                                                        <p class="font-semibold text-gray-900">Koperasi Sejahtera</p>
                                                        <p class="text-sm text-gray-500 md:hidden">Keuangan</p>
                                                    </div>
                                                </div>
                                            </td>
                                            <td class="py-4 px-6 hidden md:table-cell">
                                                <span class="text-sm text-gray-600">Keuangan</span>
                                            </td>
                                            <td class="py-4 px-6">
                                                <span class="status-badge bg-emerald-100 text-emerald-800">Aktif</span>
                                            </td>
                                            <td class="py-4 px-6 hidden lg:table-cell">
                                                <span class="text-sm text-gray-600">3 hari lalu</span>
                                            </td>
                                            <td class="py-4 px-6 text-right">
                                                <button class="text-primary-600 hover:text-primary-700 font-medium text-sm">Detail</button>
                                            </td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>

                    <!-- Customer Profile Page -->
                    <div id="customer-profile-page" class="page hidden p-4 md:p-6">
                        <div class="mb-6">
                            <button onclick="showPage('dashboard-page')" class="flex items-center space-x-2 text-gray-500 hover:text-gray-700 font-medium mb-4 transition-colors">
                                <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 19l-7-7m0 0l7-7m-7 7h18" />
                                </svg>
                                <span>Kembali ke Dashboard</span>
                            </button>
                            <div class="flex flex-col md:flex-row md:items-center justify-between space-y-4 md:space-y-0">
                                <div>
                                    <h1 id="customer-name" class="text-2xl md:text-3xl font-bold text-gray-900">PT. Maju Mundur</h1>
                                    <p id="customer-industry" class="text-gray-500 mt-1">Industri Manufaktur</p>
                                </div>
                            </div>
                        </div>

                        <!-- Customer Tabs -->
                        <div class="border-b border-gray-200 mb-6">
                            <nav class="-mb-px flex space-x-8 overflow-x-auto">
                                <a href="#" data-tab="profil" class="tab-link whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-primary-500 text-primary-600">Profil & Analisis</a>
                                <a href="#" data-tab="sales-plan" class="tab-link whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">Sales Plan</a>
                                <a href="#" data-tab="rencana-visit" class="tab-link whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">Rencana Visit</a>
                                <a href="#" data-tab="hasil-visit" class="tab-link whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">Hasil Visit</a>
                                <a href="#" data-tab="komunikasi" class="tab-link whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300">Komunikasi</a>
                            </nav>
                        </div>

                        <!-- Tab Content -->
                        <div id="tab-content">
                            <div id="profil-content" class="tab-pane animate-fade-in">
                                <!-- Customer Info Cards -->
                                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6 mb-8">
                                    <div class="bg-white rounded-2xl shadow-soft border border-gray-100 p-6">
                                        <div class="flex items-center justify-between mb-6">
                                            <h3 class="text-lg font-semibold text-gray-900">Informasi Pelanggan</h3>
                                            <button class="text-primary-600 hover:text-primary-700 font-medium text-sm">Edit</button>
                                        </div>
                                        <dl class="space-y-4">
                                            <div>
                                                <dt class="text-sm font-medium text-gray-500">Nama PIC</dt>
                                                <dd class="text-sm text-gray-900 mt-1">Bapak Joko Widodo</dd>
                                            </div>
                                            <div>
                                                <dt class="text-sm font-medium text-gray-500">Jabatan</dt>
                                                <dd class="text-sm text-gray-900 mt-1">Manajer IT</dd>
                                            </div>
                                            <div>
                                                <dt class="text-sm font-medium text-gray-500">Email</dt>
                                                <dd class="text-sm text-gray-900 mt-1">joko@majumundur.co.id</dd>
                                            </div>
                                            <div>
                                                <dt class="text-sm font-medium text-gray-500">Telepon</dt>
                                                <dd class="text-sm text-gray-900 mt-1">+62 812-3456-7890</dd>
                                            </div>
                                        </dl>
                                    </div>

                                    <div class="bg-white rounded-2xl shadow-soft border border-gray-100 p-6">
                                        <div class="flex items-center justify-between mb-6">
                                            <h3 class="text-lg font-semibold text-gray-900">Informasi Bisnis</h3>
                                            <button class="text-primary-600 hover:text-primary-700 font-medium text-sm">Edit</button>
                                        </div>
                                        <dl class="space-y-4">
                                            <div>
                                                <dt class="text-sm font-medium text-gray-500">Skala Perusahaan</dt>
                                                <dd class="text-sm text-gray-900 mt-1">Menengah (100-250 karyawan)</dd>
                                            </div>
                                            <div>
                                                <dt class="text-sm font-medium text-gray-500">Layanan Digunakan</dt>
                                                <dd class="text-sm text-gray-900 mt-1">Indihome Fiber, Astinet</dd>
                                            </div>
                                            <div>
                                                <dt class="text-sm font-medium text-gray-500">Budget IT Tahunan</dt>
                                                <dd class="text-sm text-gray-900 mt-1">Rp 500M - Rp 1B</dd>
                                            </div>
                                            <div>
                                                <dt class="text-sm font-medium text-gray-500">Prioritas Bisnis</dt>
                                                <dd class="text-sm text-gray-900 mt-1">Digitalisasi proses produksi</dd>
                                            </div>
                                        </dl>
                                    </div>
                                </div>
                                
                                <!-- Pain Points (Moved Up) -->
                                <div class="bg-white rounded-2xl shadow-soft border border-gray-100 p-6 mb-8">
                                    <div class="flex items-center justify-between mb-2">
                                        <h3 class="text-lg font-semibold text-gray-900">Analisis Pain Points Pelanggan</h3>
                                        <button onclick="savePainPoints()" class="btn-primary px-4 py-2 rounded-lg text-white font-semibold text-sm">Simpan Pain Points</button>
                                    </div>
                                    <p class="text-sm text-gray-600 mb-6">Identifikasi dan catat semua keluhan atau tantangan pelanggan berdasarkan kategori value chain mereka. Data ini akan menjadi dasar untuk analisis peluang.</p>
                                    <div id="pain-points-container" class="space-y-4">
                                        <!-- Pain points content will be rendered here by JS -->
                                    </div>
                                </div>


                                <!-- Timeline (Now After Pain Points) -->
                                <div class="bg-white rounded-2xl shadow-soft border border-gray-100 p-6">
                                    <div class="flex items-center justify-between mb-6">
                                        <h3 class="text-lg font-semibold text-gray-900">Timeline Analisis & Aktivitas Penjualan</h3>
                                        <button onclick="openGapAnalysisModal()" class="btn-primary px-4 py-2 rounded-lg text-white font-semibold text-sm flex items-center space-x-2">
                                            <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4v16m8-8H4" />
                                            </svg>
                                            <span>Buat Analisis Peluang</span>
                                        </button>
                                    </div>
                                    <div id="analysis-timeline">
                                        <!-- Timeline content will be rendered here -->
                                    </div>
                                </div>

                            </div>

                            <div id="sales-plan-content" class="tab-pane hidden">
                                <div id="sales-plan-list-container" class="space-y-6">
                                    <!-- Sales plans will be rendered here -->
                                </div>
                            </div>

                            <div id="rencana-visit-content" class="tab-pane hidden">
                                <div id="visit-plan-list-container" class="space-y-6">
                                    <!-- Visit plans will be rendered here -->
                                </div>
                            </div>

                            <div id="hasil-visit-content" class="tab-pane hidden">
                                <div id="visit-result-list-container" class="space-y-6">
                                    <!-- Visit results will be rendered here -->
                                </div>
                            </div>

                            <div id="komunikasi-content" class="tab-pane hidden">
                                <div class="bg-white rounded-2xl shadow-soft border border-gray-100 flex flex-col h-[600px]">
                                    <div class="p-6 border-b border-gray-100">
                                        <h3 class="font-semibold text-gray-900">Chat dengan Bapak Joko</h3>
                                    </div>
                                    <div class="flex-1 p-6 space-y-4 overflow-y-auto">
                                        <div class="flex justify-end">
                                            <div class="bg-primary-600 text-white p-4 rounded-2xl rounded-br-md max-w-xs">
                                                <p class="text-sm">Selamat pagi Pak Joko, saya ingin konfirmasi untuk jadwal meeting kita besok jam 10 pagi. Apakah sudah sesuai?</p>
                                                <p class="text-xs text-primary-200 text-right mt-2">10:30 AM</p>
                                            </div>
                                        </div>
                                        <div class="flex justify-start">
                                            <div class="bg-gray-100 p-4 rounded-2xl rounded-bl-md max-w-xs">
                                                <p class="text-sm text-gray-900">Pagi Mas Budi. Betul, sudah sesuai. Sampai bertemu besok.</p>
                                                <p class="text-xs text-gray-500 text-right mt-2">10:32 AM</p>
                                            </div>
                                        </div>
                                    </div>
                                    <div class="p-6 border-t border-gray-100">
                                        <div class="flex items-center space-x-3">
                                            <input type="text" placeholder="Ketik pesan Anda..." class="form-input flex-1 rounded-full px-4 py-3">
                                            <button class="btn-primary p-3 rounded-full">
                                                <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 19l9 2-9-18-9 18 9-2zm0 0v-8" />
                                                </svg>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Other pages (visits, sales-plans, etc.) would go here -->
                    <div id="visits-page" class="page hidden p-4 md:p-6">
                        <div class="empty-state">
                            <svg class="w-16 h-16 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                            <h3 class="text-lg font-medium text-gray-900 mt-4">Halaman Visit</h3>
                            <p class="text-gray-500 mt-2">Fitur ini sedang dalam pengembangan</p>
                        </div>
                    </div>

                    <div id="sales-plans-page" class="page hidden p-4 md:p-6">
                        <div class="empty-state">
                            <svg class="w-16 h-16 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                            </svg>
                            <h3 class="text-lg font-medium text-gray-900 mt-4">Halaman Sales Plan</h3>
                            <p class="text-gray-500 mt-2">Fitur ini sedang dalam pengembangan</p>
                        </div>
                    </div>

                    <div id="customers-page" class="page hidden p-4 md:p-6">
                        <div class="empty-state">
                            <svg class="w-16 h-16 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z" />
                            </svg>
                            <h3 class="text-lg font-medium text-gray-900 mt-4">Halaman Pelanggan</h3>
                            <p class="text-gray-500 mt-2">Fitur ini sedang dalam pengembangan</p>
                        </div>
                    </div>
                </div>
            </main>
        </div>
    </div>

    <!-- Login Page -->
    <div id="login-page" class="min-h-screen bg-gradient-to-br from-primary-50 via-white to-primary-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-3xl shadow-large w-full max-w-md p-8 animate-slide-in">
            <div class="text-center mb-8">
                <div class="w-16 h-16 bg-gradient-to-br from-red-500 to-red-600 rounded-2xl flex items-center justify-center mx-auto mb-4">
                    <svg class="w-8 h-8 text-white" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z" />
                    </svg>
                </div>
                <h1 class="text-2xl font-bold text-gray-900">CRM Lite</h1>
                <p class="text-gray-500 mt-2">Masuk ke akun Anda</p>
            </div>
            
            <form class="space-y-6">
                <div>
                    <label for="email" class="block text-sm font-medium text-gray-700 mb-2">Email</label>
                    <input type="email" id="email" value="budi.am@telkom.co.id" class="form-input w-full px-4 py-3 rounded-xl">
                </div>
                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700 mb-2">Password</label>
                    <input type="password" id="password" value="password" class="form-input w-full px-4 py-3 rounded-xl">
                </div>
                <button type="button" onclick="login()" class="btn-primary w-full py-3 rounded-xl text-white font-semibold">
                    Masuk
                </button>
            </form>
            
            <div class="mt-6 text-center">
                <p class="text-xs text-gray-500"> 2024 Telkom Indonesia. All rights reserved.</p>
            </div>
        </div>
    </div>

    <!-- Modals -->
    <!-- Add Customer Modal -->
    <div id="add-customer-modal" class="modal hidden fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="modal-backdrop fixed inset-0" onclick="hideModal('add-customer-modal')"></div>
        <div class="bg-white rounded-2xl shadow-large w-full max-w-lg z-10 animate-slide-in">
            <div class="p-6 border-b border-gray-100">
                <h3 class="text-xl font-semibold text-gray-900">Tambah Pelanggan Baru</h3>
                <p class="text-sm text-gray-500 mt-1">Daftarkan pelanggan baru ke dalam sistem</p>
            </div>
            <div class="p-6 space-y-4">
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Nama Perusahaan</label>
                    <input type="text" class="form-input w-full px-4 py-3 rounded-xl" placeholder="PT. Contoh Perusahaan">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Industri</label>
                    <select class="form-input w-full px-4 py-3 rounded-xl">
                        <option>Pilih Industri</option>
                        <option value="Manufaktur">Manufaktur</option>
                        <option value="Retail">Retail</option>
                        <option value="Keuangan">Keuangan</option>
                        <option value="Pariwisata">Pariwisata</option>
                        <option value="F&B">F&B</option>
                        <option value="Kesehatan">Kesehatan</option>
                        <option value="Pendidikan">Pendidikan</option>
                        <option value="Properti">Properti</option>
                        <option value="Pemerintah">Pemerintah</option>
                        <option value="Logistik">Logistik</option>
                        <option value="Agribisnis">Agribisnis</option>
                    </select>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Nama PIC</label>
                    <input type="text" class="form-input w-full px-4 py-3 rounded-xl" placeholder="Nama lengkap PIC">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Email PIC</label>
                    <input type="email" class="form-input w-full px-4 py-3 rounded-xl" placeholder="email@perusahaan.com">
                </div>
            </div>
            <div class="p-6 bg-gray-50 rounded-b-2xl flex justify-end space-x-3">
                <button onclick="hideModal('add-customer-modal')" class="btn-secondary px-6 py-2 rounded-xl font-medium">Batal</button>
                <button class="btn-primary px-6 py-2 rounded-xl text-white font-medium">Simpan</button>
            </div>
        </div>
    </div>

    <!-- Gap Analysis Modal (REVISED) -->
    <div id="gap-analysis-modal" class="modal hidden fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="modal-backdrop fixed inset-0" onclick="hideModal('gap-analysis-modal')"></div>
        <div class="bg-white rounded-2xl shadow-large w-full max-w-4xl z-10 animate-slide-in max-h-[90vh] flex flex-col">
            <div class="p-6 border-b border-gray-100 flex-shrink-0">
                <h3 class="text-xl font-semibold text-gray-900">Analisis Gap & Peluang</h3>
                <p class="text-sm text-gray-500 mt-1">Identifikasi kesenjangan dan peluang bisnis berdasarkan pain points pelanggan.</p>
            </div>
            <div class="p-6 space-y-6 overflow-y-auto">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tanggal Analisis</label>
                        <input type="date" id="gap-analysis-date" class="form-input w-full px-4 py-3 rounded-xl">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Prioritas</label>
                        <select id="gap-analysis-priority" class="form-input w-full px-4 py-3 rounded-xl">
                            <option value="Tinggi">Tinggi</option>
                            <option value="Sedang">Sedang</option>
                            <option value="Rendah">Rendah</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Judul Analisis</label>
                    <input type="text" id="gap-analysis-title" placeholder="Contoh: Analisis Kebutuhan Infrastruktur IT untuk Digitalisasi" class="form-input w-full px-4 py-3 rounded-xl">
                </div>
                
                <!-- NEW: Pain Points Selection -->
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Pilih Pain Points Terkait</label>
                    <div id="pain-points-selection" class="p-4 bg-gray-50 border border-gray-200 rounded-xl max-h-48 overflow-y-auto space-y-3">
                        <!-- Pain points checkboxes will be rendered here by JS -->
                    </div>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Analisis Gap (Kesenjangan)</label>
                        <textarea id="gap-analysis-gap" rows="5" placeholder="Jelaskan kesenjangan antara kondisi saat ini dan kondisi ideal yang diinginkan pelanggan..." class="form-input w-full px-4 py-3 rounded-xl resize-none"></textarea>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Peluang Bisnis (Solusi Telkom)</label>
                        <textarea id="gap-analysis-opportunity" rows="5" placeholder="Tawarkan solusi atau produk Telkom yang dapat mengisi kesenjangan tersebut..." class="form-input w-full px-4 py-3 rounded-xl resize-none"></textarea>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Estimasi Potensi Revenue</label>
                    <input type="text" id="gap-analysis-revenue" placeholder="Contoh: Rp 50.000.000" class="form-input w-full px-4 py-3 rounded-xl">
                </div>
            </div>
            <div class="p-6 bg-gray-50 rounded-b-2xl flex justify-end space-x-3 flex-shrink-0">
                <button onclick="hideModal('gap-analysis-modal')" class="btn-secondary px-6 py-3 rounded-xl font-medium">Batal</button>
                <button onclick="saveGapAnalysis()" class="btn-primary px-6 py-3 rounded-xl text-white font-medium">Simpan Analisis</button>
            </div>
        </div>
    </div>


    <!-- Sales Plan Recommendation Modal -->
    <div id="sales-plan-recommendation-modal" class="modal hidden fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="modal-backdrop fixed inset-0" onclick="hideModal('sales-plan-recommendation-modal')"></div>
        <div class="bg-white rounded-2xl shadow-large w-full max-w-3xl z-10 animate-slide-in">
            <div class="p-6 border-b border-gray-100">
                <h3 class="text-xl font-semibold text-gray-900">Rekomendasi Sales Plan</h3>
                <p class="text-sm text-gray-500 mt-1">Sistem telah menganalisis gap & peluang dan memberikan rekomendasi</p>
            </div>
            <div class="p-6 space-y-6">
                <div class="bg-blue-50 border border-blue-200 rounded-xl p-4">
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0">
                            <svg class="w-4 h-4 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z" />
                            </svg>
                        </div>
                        <div>
                            <h4 class="font-semibold text-blue-900">Rekomendasi Otomatis</h4>
                            <p class="text-sm text-blue-700 mt-1" id="auto-recommendation-text"></p>
                        </div>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Nama Sales Plan</label>
                        <input type="text" id="recommended-plan-name" class="form-input w-full px-4 py-3 rounded-xl">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Timeline</label>
                        <select id="recommended-plan-timeline" class="form-input w-full px-4 py-3 rounded-xl">
                            <option value="1 bulan">1 bulan</option>
                            <option value="3 bulan">3 bulan</option>
                            <option value="6 bulan">6 bulan</option>
                            <option value="12 bulan">12 bulan</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Target Revenue</label>
                    <input type="text" id="recommended-plan-target" class="form-input w-full px-4 py-3 rounded-xl">
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Deskripsi Plan</label>
                    <textarea id="recommended-plan-description" rows="4" class="form-input w-full px-4 py-3 rounded-xl resize-none"></textarea>
                </div>
            </div>
            <div class="p-6 bg-gray-50 rounded-b-2xl flex justify-end space-x-3">
                <button onclick="hideModal('sales-plan-recommendation-modal')" class="btn-secondary px-6 py-3 rounded-xl font-medium">Batal</button>
                <button onclick="acceptSalesPlanRecommendation()" class="bg-emerald-600 hover:bg-emerald-700 px-6 py-3 rounded-xl text-white font-medium transition-colors">Terima & Buat Sales Plan</button>
            </div>
        </div>
    </div>

    <!-- Visit Plan Modal -->
    <div id="visit-plan-modal" class="modal hidden fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="modal-backdrop fixed inset-0" onclick="hideModal('visit-plan-modal')"></div>
        <div class="bg-white rounded-2xl shadow-large w-full max-w-3xl z-10 animate-slide-in">
            <div class="p-6 border-b border-gray-100">
                <h3 class="text-xl font-semibold text-gray-900">Buat Rencana Visit</h3>
                <p class="text-sm text-gray-500 mt-1">Rencanakan kunjungan untuk melaksanakan sales plan</p>
            </div>
            <div class="p-6 space-y-6">
                <div class="bg-emerald-50 border border-emerald-200 rounded-xl p-4">
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-emerald-100 rounded-lg flex items-center justify-center flex-shrink-0">
                            <svg class="w-4 h-4 text-emerald-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                        </div>
                        <div>
                            <h4 class="font-semibold text-emerald-900">Sales Plan Terkait</h4>
                            <p class="text-sm text-emerald-700 mt-1" id="related-sales-plan-text"></p>
                        </div>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Judul Visit</label>
                    <input type="text" id="visit-plan-title" placeholder="Contoh: Presentasi Solusi IT" class="form-input w-full px-4 py-3 rounded-xl">
                </div>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Tanggal Visit</label>
                        <input type="date" id="visit-plan-date" class="form-input w-full px-4 py-3 rounded-xl">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Waktu</label>
                        <input type="time" id="visit-plan-time" class="form-input w-full px-4 py-3 rounded-xl">
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Lokasi</label>
                        <select id="visit-plan-location" class="form-input w-full px-4 py-3 rounded-xl">
                            <option value="Kantor Pelanggan">Kantor Pelanggan</option>
                            <option value="Kantor Telkom">Kantor Telkom</option>
                            <option value="Virtual Meeting">Virtual Meeting</option>
                            <option value="Lokasi Lain">Lokasi Lain</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Tujuan Visit</label>
                    <textarea id="visit-plan-objective" rows="3" placeholder="Jelaskan tujuan dan agenda visit..." class="form-input w-full px-4 py-3 rounded-xl resize-none"></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Persiapan yang Diperlukan</label>
                    <textarea id="visit-plan-preparation" rows="2" placeholder="Dokumen, presentasi, atau persiapan lain..." class="form-input w-full px-4 py-3 rounded-xl resize-none"></textarea>
                </div>
            </div>
            <div class="p-6 bg-gray-50 rounded-b-2xl flex justify-end space-x-3">
                <button onclick="hideModal('visit-plan-modal')" class="btn-secondary px-6 py-3 rounded-xl font-medium">Batal</button>
                <button onclick="saveVisitPlan()" class="btn-primary px-6 py-3 rounded-xl text-white font-medium">Simpan Rencana Visit</button>
            </div>
        </div>
    </div>

    <!-- Visit Result Modal -->
    <div id="visit-result-modal" class="modal hidden fixed inset-0 z-50 flex items-center justify-center p-4">
        <div class="modal-backdrop fixed inset-0" onclick="hideModal('visit-result-modal')"></div>
        <div class="bg-white rounded-2xl shadow-large w-full max-w-3xl z-10 animate-slide-in max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b border-gray-100">
                <h3 class="text-xl font-semibold text-gray-900">Catat Hasil Visit</h3>
                <p class="text-sm text-gray-500 mt-1">Dokumentasikan hasil dan tindak lanjut dari visit</p>
            </div>
            <div class="p-6 space-y-6">
                <div class="bg-blue-50 border border-blue-200 rounded-xl p-4">
                    <div class="flex items-start space-x-3">
                        <div class="w-8 h-8 bg-blue-100 rounded-lg flex items-center justify-center flex-shrink-0">
                            <svg class="w-4 h-4 text-blue-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                        </div>
                        <div>
                            <h4 class="font-semibold text-blue-900">Rencana Visit</h4>
                            <p class="text-sm text-blue-700 mt-1" id="related-visit-plan-text"></p>
                        </div>
                    </div>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Status Visit</label>
                        <select id="visit-result-status" class="form-input w-full px-4 py-3 rounded-xl">
                            <option value="Berhasil">Berhasil</option>
                            <option value="Tertunda">Tertunda</option>
                            <option value="Dibatalkan">Dibatalkan</option>
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm font-medium text-gray-700 mb-2">Peluang Closing</label>
                        <select id="visit-result-closing-chance" class="form-input w-full px-4 py-3 rounded-xl">
                            <option value="Tinggi">Tinggi (70-90%)</option>
                            <option value="Sedang">Sedang (40-70%)</option>
                            <option value="Rendah">Rendah (10-40%)</option>
                            <option value="Sangat Rendah">Sangat Rendah (<10%)</option>
                        </select>
                    </div>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Ringkasan Hasil</label>
                    <textarea id="visit-result-summary" rows="4" placeholder="Ringkasan diskusi dan hasil visit..." class="form-input w-full px-4 py-3 rounded-xl resize-none"></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Feedback Pelanggan</label>
                    <textarea id="visit-result-feedback" rows="3" placeholder="Tanggapan dan feedback dari pelanggan..." class="form-input w-full px-4 py-3 rounded-xl resize-none"></textarea>
                </div>
                <div>
                    <label class="block text-sm font-medium text-gray-700 mb-2">Tindak Lanjut</label>
                    <textarea id="visit-result-followup" rows="3" placeholder="Langkah selanjutnya yang perlu dilakukan..." class="form-input w-full px-4 py-3 rounded-xl resize-none"></textarea>
                </div>
            </div>
            <div class="p-6 bg-gray-50 rounded-b-2xl flex justify-end space-x-3">
                <button onclick="hideModal('visit-result-modal')" class="btn-secondary px-6 py-3 rounded-xl font-medium">Batal</button>
                <button onclick="saveVisitResult()" class="bg-emerald-600 hover:bg-emerald-700 px-6 py-3 rounded-xl text-white font-medium transition-colors">Simpan Hasil Visit</button>
            </div>
        </div>
    </div>

    <script>
        // Global Variables
        let currentCustomer = '';
        let painPointsData = {}; // REVISED: Renamed for clarity
        let timelineItems = [];
        let gapAnalyses = [];
        let salesPlans = [];
        let visitPlans = [];
        let visitResults = [];

        // Value Chain Categories for Pain Points
        const valueChainCategories = [
            { id: 'inbound-logistics', name: 'Inbound Logistics', description: 'Penerimaan, penyimpanan, dan distribusi input' },
            { id: 'operations', name: 'Operations', description: 'Transformasi input menjadi produk/layanan' },
            { id: 'outbound-logistics', name: 'Outbound Logistics', description: 'Pengumpulan, penyimpanan, dan distribusi output' },
            { id: 'marketing-sales', name: 'Marketing & Sales', description: 'Promosi dan penjualan produk/layanan' },
            { id: 'service', name: 'Service', description: 'Layanan untuk meningkatkan nilai produk' },
            { id: 'procurement', name: 'Procurement', description: 'Pengadaan sumber daya dan input' },
            { id: 'technology-development', name: 'Technology Development', description: 'Penelitian, pengembangan, dan inovasi teknologi' },
            { id: 'human-resource', name: 'Human Resource Management', description: 'Rekrutmen, pelatihan, dan pengembangan SDM' },
            { id: 'firm-infrastructure', name: 'Firm Infrastructure', description: 'Sistem manajemen, keuangan, dan administrasi' }
        ];

        // Utility Functions
        function showPage(pageId) {
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            
            document.querySelectorAll('.page').forEach(page => {
                page.classList.add('hidden');
            });
            
            document.getElementById(pageId).classList.remove('hidden');
            
            const titles = {
                'dashboard-page': { title: 'Dashboard', subtitle: 'Selamat datang kembali, Budi!' },
                'customers-page': { title: 'Pelanggan', subtitle: 'Kelola data pelanggan Anda' },
                'visits-page': { title: 'Jadwal Visit', subtitle: 'Atur dan pantau kunjungan pelanggan' },
                'sales-plans-page': { title: 'Sales Plan', subtitle: 'Kelola rencana penjualan' }
            };
            
            if (titles[pageId]) {
                document.getElementById('page-title').textContent = titles[pageId].title;
                document.getElementById('page-subtitle').textContent = titles[pageId].subtitle;
            }
            
            closeMobileSidebar();
        }

        function showModal(modalId) {
            document.getElementById(modalId).classList.remove('hidden');
            document.body.style.overflow = 'hidden';
        }

        function hideModal(modalId) {
            document.getElementById(modalId).classList.add('hidden');
            document.body.style.overflow = 'auto';
        }

        function showCustomerProfile(customerName, industry) {
            currentCustomer = customerName;
            document.getElementById('customer-name').textContent = customerName;
            document.getElementById('customer-industry').textContent = `Industri ${industry}`;
            
            resetCustomerData();
            initializePainPoints(); // REVISED
            renderTimeline();
            renderSalesPlans();
            renderVisitPlans();
            renderVisitResults();
            
            showPage('customer-profile-page');
            showTab('profil');
        }

        function showTab(tabName) {
            document.querySelectorAll('.tab-pane').forEach(pane => {
                pane.classList.add('hidden');
            });
            
            const targetPane = document.getElementById(`${tabName}-content`);
            if (targetPane) {
                targetPane.classList.remove('hidden');
                targetPane.classList.add('animate-fade-in');
            }
            
            document.querySelectorAll('.tab-link').forEach(link => {
                link.classList.remove('border-primary-500', 'text-primary-600');
                link.classList.add('border-transparent', 'text-gray-500');
            });
            
            const activeTab = document.querySelector(`[data-tab="${tabName}"]`);
            if (activeTab) {
                activeTab.classList.add('border-primary-500', 'text-primary-600');
                activeTab.classList.remove('border-transparent', 'text-gray-500');
            }
        }

        function resetCustomerData() {
            painPointsData = {};
            timelineItems = [];
            gapAnalyses = [];
            salesPlans = [];
            visitPlans = [];
            visitResults = [];
        }

        // Mobile Sidebar Functions
        function openMobileSidebar() {
            document.getElementById('sidebar').classList.add('open');
            document.getElementById('mobile-overlay').classList.remove('hidden');
        }

        function closeMobileSidebar() {
            document.getElementById('sidebar').classList.remove('open');
            document.getElementById('mobile-overlay').classList.add('hidden');
        }

        // Login Function
        function login() {
            const loadingScreen = document.getElementById('loading-screen');
            loadingScreen.classList.remove('hidden');
            
            setTimeout(() => {
                document.getElementById('login-page').classList.add('hidden');
                document.getElementById('app-container').classList.remove('hidden');
                loadingScreen.classList.add('hidden');
                showPage('dashboard-page');
            }, 1500);
        }

        // --- REVISED & NEW: Pain Points Functions ---
        function initializePainPoints() {
            valueChainCategories.forEach(category => {
                if (!painPointsData[category.id]) {
                    painPointsData[category.id] = {
                        category: category,
                        points: []
                    };
                }
            });
            renderPainPoints();
        }

        function renderPainPoints() {
            const container = document.getElementById('pain-points-container');
            if (!container) return;
            
            container.innerHTML = valueChainCategories.map(category => {
                const data = painPointsData[category.id] || { points: [] };
                return `
                    <div class="bg-gray-50 rounded-xl border border-gray-200 overflow-hidden transition-all duration-300">
                        <div class="bg-gradient-to-r from-gray-100 to-gray-50 p-4 border-b border-gray-200">
                            <div class="flex justify-between items-center">
                                <div>
                                    <h4 class="font-semibold text-gray-900">${category.name}</h4>
                                    <p class="text-xs text-gray-600 mt-1">${category.description}</p>
                                </div>
                                <button onclick="addPainPoint('${category.id}')" class="text-primary-600 hover:text-primary-700 font-medium text-sm transition-colors flex items-center space-x-1">
                                    <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 6v6m0 0v6m0-6h6m-6 0H6" /></svg>
                                    <span>Tambah</span>
                                </button>
                            </div>
                        </div>
                        <div class="p-4">
                            <div id="pain-points-list-${category.id}" class="space-y-3">
                                ${data.points.length === 0 ? 
                                    '<p class="text-sm text-gray-500 italic text-center py-4">Belum ada pain points yang diidentifikasi. Klik "+ Tambah" untuk memulai.</p>' :
                                    data.points.map((point, index) => renderPainPointInput(category.id, index, point.description)).join('')
                                }
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }
        
        function renderPainPointInput(categoryId, index, value) {
            return `
                <div class="flex items-center space-x-3 p-2 bg-white rounded-lg border border-gray-200 hover:border-primary-300 focus-within:border-primary-400 focus-within:ring-1 focus-within:ring-primary-400 transition-all duration-200">
                    <div class="flex-1">
                        <input type="text" value="${value}"
                                onchange="updatePainPoint('${categoryId}', ${index}, this.value)"
                                class="w-full bg-transparent border-none focus:ring-0 text-sm placeholder-gray-400"
                                placeholder="Tulis pain point di sini...">
                    </div>
                    <button onclick="removePainPoint('${categoryId}', ${index})"
                            class="text-red-400 hover:text-red-600 transition-colors p-1 rounded-full hover:bg-red-50">
                        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16" />
                        </svg>
                    </button>
                </div>
            `;
        }

        function addPainPoint(categoryId) {
            if (!painPointsData[categoryId]) {
                painPointsData[categoryId] = { points: [] };
            }
            painPointsData[categoryId].points.push({
                description: '',
                createdAt: new Date()
            });
            // Re-render only the specific list to be more efficient
            const listContainer = document.getElementById(`pain-points-list-${categoryId}`);
            if(painPointsData[categoryId].points.length === 1) { // If it was empty before
                 listContainer.innerHTML = '';
            }
            const newIndex = painPointsData[categoryId].points.length - 1;
            listContainer.insertAdjacentHTML('beforeend', renderPainPointInput(categoryId, newIndex, ''));
            listContainer.lastElementChild.querySelector('input').focus();
        }

        function updatePainPoint(categoryId, index, description) {
            if (painPointsData[categoryId] && painPointsData[categoryId].points[index]) {
                painPointsData[categoryId].points[index].description = description;
            }
        }

        function removePainPoint(categoryId, index) {
            if (painPointsData[categoryId] && painPointsData[categoryId].points[index]) {
                painPointsData[categoryId].points.splice(index, 1);
                renderPainPoints(); // Full re-render is simpler here to handle empty state correctly
            }
        }

        function savePainPoints() {
            showNotification('Pain Points berhasil disimpan dan diperbarui!', 'success');
        }

        // Timeline Functions
        function renderTimeline() {
            const container = document.getElementById('analysis-timeline');
            if (!container) return;
            
            if (timelineItems.length === 0) {
                container.innerHTML = `
                    <div class="empty-state">
                        <svg class="w-16 h-16 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
                        </svg>
                        <h3 class="text-lg font-medium text-gray-900 mt-4">Belum ada aktivitas analisis</h3>
                        <p class="text-gray-500 mt-2">Mulai dengan mengklik tombol 'Buat Analisis Peluang' di atas</p>
                    </div>
                `;
                return;
            }

            container.innerHTML = timelineItems.sort((a, b) => b.date - a.date).map((item, index, arr) => {
                const isLast = index === arr.length - 1;
                return `
                    <div class="timeline-item ${isLast ? '' : 'pb-6'}">
                        <div class="timeline-dot ${item.status}"></div>
                        <div class="bg-white rounded-xl border border-gray-200 p-6 shadow-soft">
                            <div class="flex justify-between items-start">
                                <div class="flex-1 min-w-0">
                                    <h4 class="font-semibold text-gray-900">${item.title}</h4>
                                    <p class="text-sm text-gray-600 mt-2 break-words">${item.description}</p>
                                    <p class="text-xs text-gray-500 mt-3">${item.date.toLocaleDateString('id-ID', {
                                        day: 'numeric',
                                        month: 'long',
                                        year: 'numeric',
                                        hour: '2-digit',
                                        minute: '2-digit'
                                    })}</p>
                                </div>
                                <div class="ml-4 flex-shrink-0">
                                    ${getTimelineActionButton(item)}
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        function getTimelineActionButton(item) {
            if (item.type === 'gap-analysis' && item.status === 'completed') {
                return `
                    <button onclick="showSalesPlanRecommendation(${item.id})" class="bg-emerald-600 hover:bg-emerald-700 px-4 py-2 rounded-lg text-white font-medium text-sm transition-colors whitespace-nowrap">
                        Buat Sales Plan
                    </button>
                `;
            } else if (item.type === 'sales-plan' && item.status === 'active') {
                return `
                    <button onclick="createVisitPlan(${item.id})" class="btn-primary px-4 py-2 rounded-lg text-white font-medium text-sm whitespace-nowrap">
                        Buat Rencana Visit
                    </button>
                `;
            } else if (item.type === 'visit-plan' && item.status === 'scheduled') {
                return `
                    <button onclick="completeVisit(${item.id})" class="bg-amber-600 hover:bg-amber-700 px-4 py-2 rounded-lg text-white font-medium text-sm transition-colors whitespace-nowrap">
                        Selesaikan Visit
                    </button>
                `;
            }
            return '';
        }

        // --- REVISED & NEW: Gap Analysis Functions ---
        function openGapAnalysisModal() {
            document.getElementById('gap-analysis-date').value = new Date().toISOString().split('T')[0];
            populatePainPointSelector(); // NEW: Populate the modal with pain points
            showModal('gap-analysis-modal');
        }

        function populatePainPointSelector() {
            const container = document.getElementById('pain-points-selection');
            container.innerHTML = '';
            let hasPainPoints = false;

            valueChainCategories.forEach(category => {
                const data = painPointsData[category.id];
                const validPoints = data ? data.points.filter(p => p.description && p.description.trim() !== '') : [];

                if (validPoints.length > 0) {
                    hasPainPoints = true;
                    const categoryHtml = `
                        <div class="pt-2">
                            <h5 class="text-sm font-semibold text-gray-700 mb-2">${category.name}</h5>
                            <div class="space-y-2 pl-2">
                                ${validPoints.map((point, index) => `
                                    <label for="pp-${category.id}-${index}" class="flex items-center space-x-3 text-sm text-gray-800 cursor-pointer">
                                        <input id="pp-${category.id}-${index}" type="checkbox" name="selected-pain-points" value="${point.description}" class="form-checkbox h-4 w-4 rounded border-gray-300 text-primary-600 focus:ring-primary-500">
                                        <span>${point.description}</span>
                                    </label>
                                `).join('')}
                            </div>
                        </div>
                    `;
                    container.insertAdjacentHTML('beforeend', categoryHtml);
                }
            });

            if (!hasPainPoints) {
                container.innerHTML = '<p class="text-sm text-gray-500 text-center italic py-4">Belum ada pain points yang diinput. Silakan isi terlebih dahulu di halaman profil & analisis.</p>';
            }
        }

        function saveGapAnalysis() {
            const date = document.getElementById('gap-analysis-date').value;
            const title = document.getElementById('gap-analysis-title').value;
            let gap = document.getElementById('gap-analysis-gap').value;
            const opportunity = document.getElementById('gap-analysis-opportunity').value;
            const priority = document.getElementById('gap-analysis-priority').value;
            const revenue = document.getElementById('gap-analysis-revenue').value;

            if (!date || !title.trim() || !gap.trim() || !opportunity.trim()) {
                showNotification('Mohon lengkapi judul, gap, dan peluang.', 'error');
                return;
            }
            
            // NEW: Prepend selected pain points to the gap analysis text
            const selectedPoints = Array.from(document.querySelectorAll('input[name="selected-pain-points"]:checked'))
                                        .map(cb => cb.value);

            if (selectedPoints.length > 0) {
                const pointsText = 'Berdasarkan pain points yang teridentifikasi:\n' + selectedPoints.map(p => `- ${p}`).join('\n') + '\n\n';
                gap = pointsText + gap;
            }


            const gapAnalysis = {
                id: Date.now(),
                date: new Date(date),
                title,
                gap,
                opportunity,
                priority,
                revenue,
                createdAt: new Date()
            };

            gapAnalyses.push(gapAnalysis);

            const timelineItem = {
                id: gapAnalysis.id,
                type: 'gap-analysis',
                title: `Analisis Peluang: ${title}`,
                description: `Prioritas: ${priority} | Potensi Revenue: ${revenue}`,
                date: new Date(),
                status: 'completed'
            };

            timelineItems.push(timelineItem);

            hideModal('gap-analysis-modal');
            renderTimeline();

            document.getElementById('gap-analysis-modal').querySelector('form')?.reset(); // Reset form if it is a form
            document.getElementById('gap-analysis-title').value = '';
            document.getElementById('gap-analysis-gap').value = '';
            document.getElementById('gap-analysis-opportunity').value = '';
            document.getElementById('gap-analysis-revenue').value = '';

            showNotification('Analisis Gap & Peluang berhasil disimpan!', 'success');
        }


        // Sales Plan Functions
        function showSalesPlanRecommendation(gapAnalysisId) {
            const gapAnalysis = gapAnalyses.find(ga => ga.id === gapAnalysisId);
            if (!gapAnalysis) return;

            const autoRecommendation = `Berdasarkan analisis "${gapAnalysis.title}", sistem merekomendasikan untuk fokus pada peluang: ${gapAnalysis.opportunity}`;
            document.getElementById('auto-recommendation-text').textContent = autoRecommendation;

            document.getElementById('recommended-plan-name').value = `Sales Plan: ${gapAnalysis.title}`;
            document.getElementById('recommended-plan-target').value = gapAnalysis.revenue || 'Rp 50.000.000';
            document.getElementById('recommended-plan-description').value = `Solusi untuk mengatasi gap: ${gapAnalysis.gap}\n\nMemanfaatkan peluang: ${gapAnalysis.opportunity}`;

            window.currentGapAnalysisId = gapAnalysisId;
            showModal('sales-plan-recommendation-modal');
        }

        function acceptSalesPlanRecommendation() {
            const name = document.getElementById('recommended-plan-name').value;
            const target = document.getElementById('recommended-plan-target').value;
            const timeline = document.getElementById('recommended-plan-timeline').value;
            const description = document.getElementById('recommended-plan-description').value;

            if (!name.trim() || !target.trim()) {
                showNotification('Mohon lengkapi nama dan target sales plan.', 'error');
                return;
            }

            const salesPlan = {
                id: Date.now(),
                gapAnalysisId: window.currentGapAnalysisId,
                name,
                target,
                timeline,
                description,
                status: 'active',
                createdAt: new Date()
            };

            salesPlans.push(salesPlan);

            const timelineItem = {
                id: salesPlan.id,
                type: 'sales-plan',
                title: `Sales Plan Dibuat: ${name}`,
                description: `Target: ${target} | Timeline: ${timeline}`,
                date: new Date(),
                status: 'active'
            };

            timelineItems.push(timelineItem);

            hideModal('sales-plan-recommendation-modal');
            renderTimeline();
            renderSalesPlans();

            showNotification('Sales Plan berhasil dibuat! Anda sekarang dapat membuat Rencana Visit.', 'success');
        }

        function renderSalesPlans() {
            const container = document.getElementById('sales-plan-list-container');
            if (!container) return;
            
            if (salesPlans.length === 0) {
                container.innerHTML = `
                    <div class="bg-white rounded-2xl shadow-soft border border-gray-100">
                        <div class="empty-state">
                            <svg class="w-16 h-16 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z" />
                            </svg>
                            <h3 class="text-lg font-medium text-gray-900 mt-4">Belum ada Sales Plan</h3>
                            <p class="text-gray-500 mt-2">Mulai buat sales plan dari tab 'Profil & Analisis'</p>
                        </div>
                    </div>
                `;
                return;
            }

            container.innerHTML = salesPlans.map(plan => `
                <div class="bg-white rounded-2xl shadow-soft border border-gray-100 p-6 animate-slide-in">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900">${plan.name}</h3>
                            <p class="text-sm text-gray-600 mt-2 whitespace-pre-wrap">${plan.description}</p>
                        </div>
                        <span class="status-badge ${plan.status === 'active' ? 'bg-emerald-100 text-emerald-800' : 'bg-gray-100 text-gray-800'}">${plan.status}</span>
                    </div>
                    <div class="grid grid-cols-2 gap-4 text-sm">
                        <div class="bg-gray-50 rounded-lg p-3">
                            <span class="font-medium text-gray-700">Target:</span>
                            <p class="text-gray-900 mt-1">${plan.target}</p>
                        </div>
                        <div class="bg-gray-50 rounded-lg p-3">
                            <span class="font-medium text-gray-700">Timeline:</span>
                            <p class="text-gray-900 mt-1">${plan.timeline}</p>
                        </div>
                    </div>
                    <div class="mt-4 pt-4 border-t border-gray-100">
                        <span class="text-xs text-gray-500">Dibuat: ${plan.createdAt.toLocaleDateString('id-ID')}</span>
                    </div>
                </div>
            `).join('');
        }

        // Visit Plan Functions
        function createVisitPlan(salesPlanId) {
            const salesPlan = salesPlans.find(sp => sp.id === salesPlanId);
            if (!salesPlan) return;

            document.getElementById('related-sales-plan-text').textContent = `${salesPlan.name} - Target: ${salesPlan.target}`;
            document.getElementById('visit-plan-date').value = new Date(Date.now() + 7 * 24 * 60 * 60 * 1000).toISOString().split('T')[0];
            
            window.currentSalesPlanId = salesPlanId;
            showModal('visit-plan-modal');
        }

        function saveVisitPlan() {
            const title = document.getElementById('visit-plan-title').value;
            const date = document.getElementById('visit-plan-date').value;
            const time = document.getElementById('visit-plan-time').value;
            const location = document.getElementById('visit-plan-location').value;
            const objective = document.getElementById('visit-plan-objective').value;
            const preparation = document.getElementById('visit-plan-preparation').value;

            if (!title.trim() || !date || !time || !objective.trim()) {
                showNotification('Mohon lengkapi semua field yang wajib diisi.', 'error');
                return;
            }

            const visitPlan = {
                id: Date.now(),
                salesPlanId: window.currentSalesPlanId,
                title,
                date: new Date(date + 'T' + time),
                location,
                objective,
                preparation,
                status: 'scheduled',
                createdAt: new Date()
            };

            visitPlans.push(visitPlan);

            const timelineItem = {
                id: visitPlan.id,
                type: 'visit-plan',
                title: `Rencana Visit: ${title}`,
                description: `Jadwal: ${new Date(visitPlan.date).toLocaleDateString('id-ID')} | Lokasi: ${location}`,
                date: new Date(),
                status: 'scheduled'
            };

            timelineItems.push(timelineItem);

            hideModal('visit-plan-modal');
            renderTimeline();
            renderVisitPlans();

            document.getElementById('visit-plan-title').value = '';
            document.getElementById('visit-plan-objective').value = '';
            document.getElementById('visit-plan-preparation').value = '';

            showNotification('Rencana Visit berhasil dibuat!', 'success');
        }

        function renderVisitPlans() {
            const container = document.getElementById('visit-plan-list-container');
            if (!container) return;
            
            if (visitPlans.length === 0) {
                container.innerHTML = `
                    <div class="bg-white rounded-2xl shadow-soft border border-gray-100">
                        <div class="empty-state">
                            <svg class="w-16 h-16 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z" />
                            </svg>
                            <h3 class="text-lg font-medium text-gray-900 mt-4">Belum ada Rencana Visit</h3>
                            <p class="text-gray-500 mt-2">Rencana visit akan otomatis dibuat setelah Sales Plan disetujui</p>
                        </div>
                    </div>
                `;
                return;
            }

            container.innerHTML = visitPlans.map(plan => `
                <div class="bg-white rounded-2xl shadow-soft border border-gray-100 p-6 animate-slide-in">
                    <div class="flex justify-between items-start mb-4">
                        <div class="flex-1">
                            <h3 class="text-lg font-semibold text-gray-900">${plan.title}</h3>
                            <p class="text-sm text-gray-600 mt-2">${plan.objective}</p>
                        </div>
                        <span class="status-badge ${plan.status === 'scheduled' ? 'bg-amber-100 text-amber-800' : 'bg-emerald-100 text-emerald-800'}">
                            ${plan.status === 'scheduled' ? 'Terjadwal' : 'Selesai'}
                        </span>
                    </div>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                        <div class="bg-gray-50 rounded-lg p-3">
                            <span class="font-medium text-gray-700">Jadwal:</span>
                            <p class="text-gray-900 mt-1">${new Date(plan.date).toLocaleDateString('id-ID', { 
                                day: 'numeric', 
                                month: 'long', 
                                year: 'numeric', 
                                hour: '2-digit', 
                                minute: '2-digit' 
                            })}</p>
                        </div>
                        <div class="bg-gray-50 rounded-lg p-3">
                            <span class="font-medium text-gray-700">Lokasi:</span>
                            <p class="text-gray-900 mt-1">${plan.location}</p>
                        </div>
                    </div>
                    ${plan.preparation ? `
                        <div class="mt-4 bg-blue-50 rounded-lg p-3">
                            <span class="font-medium text-blue-900">Persiapan:</span>
                            <p class="text-blue-800 mt-1 text-sm">${plan.preparation}</p>
                        </div>
                    ` : ''}
                    <div class="mt-4 pt-4 border-t border-gray-100">
                        <span class="text-xs text-gray-500">Dibuat: ${plan.createdAt.toLocaleDateString('id-ID')}</span>
                    </div>
                </div>
            `).join('');
        }

        // Visit Result Functions
        function completeVisit(visitPlanId) {
            const visitPlan = visitPlans.find(vp => vp.id === visitPlanId);
            if (!visitPlan) return;

            document.getElementById('related-visit-plan-text').textContent = `${visitPlan.title} - ${new Date(visitPlan.date).toLocaleDateString('id-ID')}`;
            
            window.currentVisitPlanId = visitPlanId;
            showModal('visit-result-modal');
        }

        function saveVisitResult() {
            const status = document.getElementById('visit-result-status').value;
            const summary = document.getElementById('visit-result-summary').value;
            const feedback = document.getElementById('visit-result-feedback').value;
            const followup = document.getElementById('visit-result-followup').value;
            const closingChance = document.getElementById('visit-result-closing-chance').value;

            if (!summary.trim()) {
                showNotification('Mohon isi ringkasan hasil visit.', 'error');
                return;
            }

            const visitResult = {
                id: Date.now(),
                visitPlanId: window.currentVisitPlanId,
                status,
                summary,
                feedback,
                followup,
                closingChance,
                createdAt: new Date()
            };

            visitResults.push(visitResult);

            const visitPlan = visitPlans.find(vp => vp.id === window.currentVisitPlanId);
            if (visitPlan) {
                visitPlan.status = 'completed';
            }

            const timelineItem = timelineItems.find(ti => ti.id === window.currentVisitPlanId);
            if (timelineItem) {
                timelineItem.status = 'completed';
            }

            const resultTimelineItem = {
                id: visitResult.id,
                type: 'visit-result',
                title: `Hasil Visit: ${visitPlan ? visitPlan.title : 'Visit'}`,
                description: `Status: ${status} | Peluang Closing: ${closingChance}`,
                date: new Date(),
                status: 'completed'
            };

            timelineItems.push(resultTimelineItem);

            hideModal('visit-result-modal');
            renderTimeline();
            renderVisitPlans();
            renderVisitResults();

            document.getElementById('visit-result-summary').value = '';
            document.getElementById('visit-result-feedback').value = '';
            document.getElementById('visit-result-followup').value = '';

            showNotification('Hasil Visit berhasil disimpan!', 'success');
        }

        function renderVisitResults() {
            const container = document.getElementById('visit-result-list-container');
            if (!container) return;
            
            if (visitResults.length === 0) {
                container.innerHTML = `
                    <div class="bg-white rounded-2xl shadow-soft border border-gray-100">
                        <div class="empty-state">
                            <svg class="w-16 h-16 text-gray-300" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12.75L11.25 15 15 9.75M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
                            </svg>
                            <h3 class="text-lg font-medium text-gray-900 mt-4">Belum ada Hasil Visit</h3>
                            <p class="text-gray-500 mt-2">Selesaikan Rencana Visit untuk mencatat hasilnya di sini</p>
                        </div>
                    </div>
                `;
                return;
            }

            container.innerHTML = visitResults.map(result => {
                const visitPlan = visitPlans.find(vp => vp.id === result.visitPlanId);
                return `
                    <div class="bg-white rounded-2xl shadow-soft border border-gray-100 p-6 animate-slide-in">
                        <div class="flex justify-between items-start mb-4">
                            <div class="flex-1">
                                <h3 class="text-lg font-semibold text-gray-900">${visitPlan ? visitPlan.title : 'Visit'}</h3>
                                <p class="text-sm text-gray-600 mt-2">${result.summary}</p>
                            </div>
                            <span class="status-badge ${
                                result.status === 'Berhasil' ? 'bg-emerald-100 text-emerald-800' : 
                                result.status === 'Tertunda' ? 'bg-amber-100 text-amber-800' : 
                                'bg-red-100 text-red-800'
                            }">${result.status}</span>
                        </div>
                        <div class="space-y-4">
                            ${result.feedback ? `
                                <div class="bg-blue-50 rounded-lg p-4">
                                    <span class="font-medium text-blue-900">Feedback Pelanggan:</span>
                                    <p class="text-blue-800 mt-2 text-sm">${result.feedback}</p>
                                </div>
                            ` : ''}
                            ${result.followup ? `
                                <div class="bg-amber-50 rounded-lg p-4">
                                    <span class="font-medium text-amber-900">Tindak Lanjut:</span>
                                    <p class="text-amber-800 mt-2 text-sm">${result.followup}</p>
                                </div>
                            ` : ''}
                            <div class="bg-gray-50 rounded-lg p-4">
                                <span class="font-medium text-gray-700">Peluang Closing:</span>
                                <span class="text-gray-900 ml-2 font-semibold">${result.closingChance}</span>
                            </div>
                        </div>
                        <div class="mt-4 pt-4 border-t border-gray-100">
                            <span class="text-xs text-gray-500">Dicatat: ${result.createdAt.toLocaleDateString('id-ID')}</span>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Notification Function
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-24 right-4 z-50 p-4 rounded-xl shadow-large max-w-sm animate-slide-in ${
                type === 'success' ? 'bg-emerald-600 text-white' :
                type === 'error' ? 'bg-red-600 text-white' :
                'bg-blue-600 text-white'
            }`;
            notification.innerHTML = `
                <div class="flex items-start space-x-3">
                    <svg class="w-6 h-6 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                        ${type === 'success' ? 
                            '<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />' :
                            type === 'error' ?
                            '<path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd" />' :
                            '<path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd" />'
                        }
                    </svg>
                    <p class="text-sm font-medium flex-1">${message}</p>
                </div>
            `;
            
            document.body.appendChild(notification);
            
            setTimeout(() => {
                notification.style.opacity = '0';
                notification.style.transform = 'translateY(-20px)';
                setTimeout(() => notification.remove(), 300);
            }, 4000);
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            document.querySelectorAll('.tab-link').forEach(link => {
                link.addEventListener('click', function(e) {
                    e.preventDefault();
                    showTab(this.getAttribute('data-tab'));
                });
            });

            document.getElementById('open-sidebar').addEventListener('click', openMobileSidebar);
            document.getElementById('close-sidebar').addEventListener('click', closeMobileSidebar);
            document.getElementById('mobile-overlay').addEventListener('click', closeMobileSidebar);

            document.querySelectorAll('.nav-item').forEach(item => {
                item.addEventListener('click', function(e) {
                    e.preventDefault();
                    document.querySelectorAll('.nav-item').forEach(nav => nav.classList.remove('active'));
                    this.classList.add('active');
                });
            });

            document.addEventListener('click', function(e) {
                if (e.target.classList.contains('modal-backdrop')) {
                    const modal = e.target.closest('.modal');
                    if (modal) {
                        hideModal(modal.id);
                    }
                }
            });

            document.getElementById('login-page').classList.remove('hidden');
            
            setTimeout(() => {
                document.getElementById('loading-screen').classList.add('hidden');
            }, 500);
        });
    </script>
</body>
</html>
